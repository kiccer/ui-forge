import{G as pe,H as ce,aB as wa,_ as $e,aw as he,aC as Xe,ax as Qe,aD as $a,o as ea,l as m,aE as W,N as h,O as I,aa as j,a5 as z,az as ve,a4 as M,Y as G,Q as T,Z as ue,ab as re,aF as aa,x as Sa,n as S,ao as me,a8 as Ta,a9 as se,m as La,aG as Ie,R as Ke,aH as Pa,A as ta,C as ge,ar as Va,aI as Da,I as _a,J as qe,w as ee,aJ as Ma,v as na,$ as ne,aK as sa,aL as K,aM as ke,aN as la,aO as Ia,as as Fa,F as xa,au as Ba,T as za,aP as Ha,X as Aa,aQ as ye,s as d,a7 as Oa,aR as Ka,aS as qa,aA as Re,ay as Ra,aT as Ua,aU as Wa,af as Za,aV as Ue,P as ja,aW as Ga}from"./index-FVLpDxcE.js";import{E as oa}from"./index-DouBc03n.js";import{ElCheckbox as Ya}from"./index-BdhT8MXT.js";import{ElRadio as Ja}from"./index-daAX2dRs.js";import{c as We,t as Xa,E as Ze}from"./index-D9KIbmEU.js";import{i as be}from"./isEqual-BZCPh3Yn.js";import{U as Ee,C as we}from"./event-BB_Ol6Sd.js";import{u as je,c as Ge}from"./arrays-6TrVLtTe.js";import{s as Qa}from"./scroll-BMcFipyf.js";import{b as et}from"./_baseFlatten-DHDaD9ay.js";import{b as at,a as tt,c as nt}from"./index-DGFpW7D-.js";import{E as st}from"./index-Cn2uS0X3.js";import{i as lt}from"./index-lJS5e1k2.js";import{d as ot}from"./debounce-B1nWk__V.js";import"./util-B2mB0_6C.js";import"./index-C158dOBE.js";import"./hasIn-Bc3pMP_L.js";import"./flatten-n_R5wW2K.js";import"./_overRest-DNKok7ei.js";import"./identity-DKeuBCMA.js";var it=1,rt=4;function ia(e){return at(e,it|rt)}var ut=1/0;function ct(e){var t=e==null?0:e.length;return t?et(e,ut):[]}var dt=pe({name:"NodeContent",setup(){return{ns:ce("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:s}=this.$parent,{data:n,label:o}=t,{renderLabelFn:p}=s;return wa("span",{class:e.e("label")},p?p({node:t,data:n}):o)}});const xe=Symbol(),pt=pe({name:"ElCascaderNode",components:{ElCheckbox:Ya,ElRadio:Ja,NodeContent:dt,ElIcon:he,Check:Xe,Loading:Qe,ArrowRight:$a},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const s=ea(xe),n=ce("cascader-node"),o=m(()=>s.isHoverMenu),p=m(()=>s.config.multiple),u=m(()=>s.config.checkStrictly),v=m(()=>{var y;return(y=s.checkedNodes[0])==null?void 0:y.uid}),c=m(()=>e.node.isDisabled),b=m(()=>e.node.isLeaf),N=m(()=>u.value&&!b.value||!c.value),P=m(()=>F(s.expandingNode)),V=m(()=>u.value&&s.checkedNodes.some(F)),F=y=>{var L;const{level:x,uid:ae}=e.node;return((L=y==null?void 0:y.pathNodes[x-1])==null?void 0:L.uid)===ae},H=()=>{P.value||s.expandNode(e.node)},Y=y=>{const{node:L}=e;y!==L.checked&&s.handleCheckChange(L,y)},$=()=>{s.lazyLoad(e.node,()=>{b.value||H()})},q=y=>{o.value&&(D(),!b.value&&t("expand",y))},D=()=>{const{node:y}=e;!N.value||y.loading||(y.loaded?H():$())},Z=()=>{o.value&&!b.value||(b.value&&!c.value&&!u.value&&!p.value?R(!0):D())},A=y=>{u.value?(Y(y),e.node.loaded&&H()):R(y)},R=y=>{e.node.loaded?(Y(y),!u.value&&H()):$()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:v,isDisabled:c,isLeaf:b,expandable:N,inExpandingPath:P,inCheckedPath:V,ns:n,handleHoverExpand:q,handleExpand:D,handleClick:Z,handleCheck:R,handleSelectCheck:A}}}),ft=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ht=re("span",null,null,-1);function vt(e,t,s,n,o,p){const u=W("el-checkbox"),v=W("el-radio"),c=W("check"),b=W("el-icon"),N=W("node-content"),P=W("loading"),V=W("arrow-right");return h(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onFocus:t[3]||(t[3]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onClick:t[4]||(t[4]=(...F)=>e.handleClick&&e.handleClick(...F))},[j(" prefix "),e.multiple?(h(),z(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(h(),z(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ve(()=>{},["stop"]))},{default:M(()=>[j(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ht]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(h(),z(b,{key:2,class:T(e.ns.e("prefix"))},{default:M(()=>[G(c)]),_:1},8,["class"])):j("v-if",!0),j(" content "),G(N),j(" postfix "),e.isLeaf?j("v-if",!0):(h(),I(ue,{key:3},[e.node.loading?(h(),z(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:M(()=>[G(P)]),_:1},8,["class"])):(h(),z(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:M(()=>[G(V)]),_:1},8,["class"]))],64))],42,ft)}var mt=$e(pt,[["render",vt],["__file","node.vue"]]);const gt=pe({name:"ElCascaderMenu",components:{Loading:Qe,ElIcon:he,ElScrollbar:oa,ElCascaderNode:mt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=La(),s=ce("cascader-menu"),{t:n}=aa(),o=Sa();let p=null,u=null;const v=ea(xe),c=S(null),b=m(()=>!e.nodes.length),N=m(()=>!v.initialLoaded),P=m(()=>`${o.value}-${e.index}`),V=$=>{p=$.target},F=$=>{if(!(!v.isHoverMenu||!p||!c.value))if(p.contains($.target)){H();const q=t.vnode.el,{left:D}=q.getBoundingClientRect(),{offsetWidth:Z,offsetHeight:A}=q,R=$.clientX-D,y=p.offsetTop,L=y+p.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${y} L${Z} 0 V${y} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${L} L${Z} ${A} V${L} Z" />
        `}else u||(u=window.setTimeout(Y,v.config.hoverThreshold))},H=()=>{u&&(clearTimeout(u),u=null)},Y=()=>{c.value&&(c.value.innerHTML="",H())};return{ns:s,panel:v,hoverZone:c,isEmpty:b,isLoading:N,menuId:P,t:n,handleExpand:V,handleMouseMove:F,clearHoverZone:Y}}});function bt(e,t,s,n,o,p){const u=W("el-cascader-node"),v=W("loading"),c=W("el-icon"),b=W("el-scrollbar");return h(),z(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:M(()=>{var N;return[(h(!0),I(ue,null,me(e.nodes,P=>(h(),z(u,{key:P.uid,node:P,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(h(),I("div",{key:0,class:T(e.ns.e("empty-text"))},[G(c,{size:"14",class:T(e.ns.is("loading"))},{default:M(()=>[G(v)]),_:1},8,["class"]),Ta(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(h(),I("div",{key:1,class:T(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(N=e.panel)!=null&&N.isHoverMenu?(h(),I("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):j("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var yt=$e(gt,[["render",bt],["__file","menu.vue"]]);let kt=0;const Ct=e=>{const t=[e];let{parent:s}=e;for(;s;)t.unshift(s),s=s.parent;return t};class de{constructor(t,s,n,o=!1){this.data=t,this.config=s,this.parent=n,this.root=o,this.uid=kt++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:v}=s,c=t[v],b=Ct(this);this.level=o?0:n?n.level+1:1,this.value=t[p],this.label=t[u],this.pathNodes=b,this.pathValues=b.map(N=>N.value),this.pathLabels=b.map(N=>N.label),this.childrenData=c,this.children=(c||[]).map(N=>new de(N,s,this)),this.loaded=!s.lazy||this.isLeaf||!Ie(c)}get isDisabled(){const{data:t,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(Ke(o)?o(t,this):!!t[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:t,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:u}=s,v=Ke(u)?u(t,this):t[u];return Pa(v)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:s,children:n}=this,o=new de(t,this.config,this);return Array.isArray(s)?s.push(t):this.childrenData=[t],n.push(o),o}calcText(t,s){const n=t?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(t,...s){const n=`onParent${We(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...s),o[n]&&o[n](...s))})}emit(t,...s){const{parent:n}=this,o=`onChild${We(t)}`;n&&(n[o]&&n[o](...s),n.emit(t,...s))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,s=t.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(t){const s=this.children.length,n=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Fe=(e,t)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!t&&s.push(n),s=s.concat(Fe(n.children,t))),s),[]);class Ye{constructor(t,s){this.config=s;const n=(t||[]).map(o=>new de(o,this.config));this.nodes=n,this.allNodes=Fe(n,!1),this.leafNodes=Fe(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,s){const n=s?s.appendChild(t):new de(t,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,s){t.forEach(n=>this.appendNode(n,s))}getNodeByValue(t,s=!1){return!t&&t!==0?null:this.getFlattedNodes(s).find(o=>be(o.value,t)||be(o.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:o})=>be(t.value,n)&&t.level===o)||null}}const ra=ta({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),Nt={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Va,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Et=e=>m(()=>({...Nt,...e.props})),Je=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},wt=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():Da(e)&&e.click()},$t=(e,t)=>{const s=t.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,u)=>{const v=n.indexOf(u.uid);return v>-1&&(p.push(u),s.splice(v,1),n.splice(v,1)),p},[]);return o.push(...s),o},St=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:yt},props:{...ra,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:t,slots:s}){let n=!1;const o=ce("cascader"),p=Et(e);let u=null;const v=S(!0),c=S([]),b=S(null),N=S([]),P=S(null),V=S([]),F=m(()=>p.value.expandTrigger==="hover"),H=m(()=>e.renderLabel||s.default),Y=()=>{const{options:r}=e,f=p.value;n=!1,u=new Ye(r,f),N.value=[u.getNodes()],f.lazy&&Ie(e.options)?(v.value=!1,$(void 0,g=>{g&&(u=new Ye(g,f),N.value=[u.getNodes()]),v.value=!0,x(!1,!0)})):x(!1,!0)},$=(r,f)=>{const g=p.value;r=r||new de({},g,void 0,!0),r.loading=!0;const E=k=>{const w=r,_=w.root?null:w;k&&(u==null||u.appendNodes(k,_)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],f&&f(k)};g.lazyLoad(r,E)},q=(r,f)=>{var g;const{level:E}=r,k=N.value.slice(0,E);let w;r.isLeaf?w=r.pathNodes[E-2]:(w=r,k.push(r.children)),((g=P.value)==null?void 0:g.uid)!==(w==null?void 0:w.uid)&&(P.value=r,N.value=k,!f&&t("expand-change",(r==null?void 0:r.pathValues)||[]))},D=(r,f,g=!0)=>{const{checkStrictly:E,multiple:k}=p.value,w=V.value[0];n=!0,!k&&(w==null||w.doCheck(!1)),r.doCheck(f),L(),g&&!k&&!E&&t("close"),!g&&!k&&!E&&Z(r)},Z=r=>{r&&(r=r.parent,Z(r),r&&q(r))},A=r=>u==null?void 0:u.getFlattedNodes(r),R=r=>{var f;return(f=A(r))==null?void 0:f.filter(g=>g.checked!==!1)},y=()=>{V.value.forEach(r=>r.doCheck(!1)),L(),N.value=N.value.slice(0,1),P.value=null,t("expand-change",[])},L=()=>{var r;const{checkStrictly:f,multiple:g}=p.value,E=V.value,k=R(!f),w=$t(E,k),_=w.map(B=>B.valueByOption);V.value=w,b.value=g?_:(r=_[0])!=null?r:null},x=(r=!1,f=!1)=>{const{modelValue:g}=e,{lazy:E,multiple:k,checkStrictly:w}=p.value,_=!w;if(!(!v.value||n||!f&&be(g,b.value)))if(E&&!r){const te=je(ct(Ge(g))).map(O=>u==null?void 0:u.getNodeByValue(O)).filter(O=>!!O&&!O.loaded&&!O.loading);te.length?te.forEach(O=>{$(O,()=>x(!1,f))}):x(!0,f)}else{const B=k?Ge(g):[g],te=je(B.map(O=>u==null?void 0:u.getNodeByValue(O,_)));ae(te,f),b.value=ia(g)}},ae=(r,f=!0)=>{const{checkStrictly:g}=p.value,E=V.value,k=r.filter(B=>!!B&&(g||B.isLeaf)),w=u==null?void 0:u.getSameNode(P.value),_=f&&w||k[0];_?_.pathNodes.forEach(B=>q(B,!0)):P.value=null,E.forEach(B=>B.doCheck(!1)),qe(k).forEach(B=>B.doCheck(!0)),V.value=k,ne(le)},le=()=>{sa&&c.value.forEach(r=>{const f=r==null?void 0:r.$el;if(f){const g=f.querySelector(`.${o.namespace.value}-scrollbar__wrap`),E=f.querySelector(`.${o.b("node")}.${o.is("active")}`)||f.querySelector(`.${o.b("node")}.in-active-path`);Qa(g,E)}})},oe=r=>{const f=r.target,{code:g}=r;switch(g){case K.up:case K.down:{r.preventDefault();const E=g===K.up?-1:1;ke(la(f,E,`.${o.b("node")}[tabindex="-1"]`));break}case K.left:{r.preventDefault();const E=c.value[Je(f)-1],k=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);ke(k);break}case K.right:{r.preventDefault();const E=c.value[Je(f)+1],k=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);ke(k);break}case K.enter:wt(f);break}};return _a(xe,qe({config:p,expandingNode:P,checkedNodes:V,isHoverMenu:F,initialLoaded:v,renderLabelFn:H,lazyLoad:$,expandNode:q,handleCheckChange:D})),ee([p,()=>e.options],Y,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{n=!1,x()},{deep:!0}),ee(()=>b.value,r=>{be(r,e.modelValue)||(t(Ee,r),t(we,r))}),Ma(()=>c.value=[]),na(()=>!Ie(e.modelValue)&&x()),{ns:o,menuList:c,menus:N,checkedNodes:V,handleKeyDown:oe,handleCheckChange:D,getFlattedNodes:A,getCheckedNodes:R,clearCheckedNodes:y,calculateCheckedValue:L,scrollToExpandingNode:le}}});function Tt(e,t,s,n,o,p){const u=W("el-cascader-menu");return h(),I("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...v)=>e.handleKeyDown&&e.handleKeyDown(...v))},[(h(!0),I(ue,null,me(e.menus,(v,c)=>(h(),z(u,{key:c,ref_for:!0,ref:b=>e.menuList[c]=b,index:c,nodes:[...v]},null,8,["index","nodes"]))),128))],34)}var Ce=$e(St,[["render",Tt],["__file","index.vue"]]);Ce.install=e=>{e.component(Ce.name,Ce)};const Lt=Ce,Pt=ta({...ra,size:Ia,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Fa.teleported,tagType:{...Xa.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Vt={[Ee]:e=>!!e||e===null,[we]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>xa(e),expandChange:e=>!!e,removeTag:e=>!!e},Dt={key:0},_t=["placeholder","onKeydown"],Mt=["onClick"],It="ElCascader",Ft=pe({name:It}),xt=pe({...Ft,props:Pt,emits:Vt,setup(e,{expose:t,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:a})=>{const{modifiersData:l,placement:i}=a;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=Ba();let u=0,v=0;const c=ce("cascader"),b=ce("input"),{t:N}=aa(),{form:P,formItem:V}=tt(),F=S(null),H=S(null),Y=S(null),$=S(null),q=S(null),D=S(!1),Z=S(!1),A=S(!1),R=S(!1),y=S(""),L=S(""),x=S([]),ae=S([]),le=S([]),oe=S(!1),r=m(()=>p.style),f=m(()=>n.disabled||(P==null?void 0:P.disabled)),g=m(()=>n.placeholder||N("el.cascader.placeholder")),E=m(()=>L.value||x.value.length>0||oe.value?"":g.value),k=nt(),w=m(()=>["small"].includes(k.value)?"small":"default"),_=m(()=>!!n.props.multiple),B=m(()=>!n.filterable||_.value),te=m(()=>_.value?L.value:y.value),O=m(()=>{var a;return((a=$.value)==null?void 0:a.checkedNodes)||[]}),ua=m(()=>!n.clearable||f.value||A.value||!Z.value?!1:!!O.value.length),Se=m(()=>{const{showAllLevels:a,separator:l}=n,i=O.value;return i.length?_.value?"":i[0].calcText(a,l):""}),ca=m(()=>(V==null?void 0:V.validateState)||""),Te=m({get(){return ia(n.modelValue)},set(a){s(Ee,a),s(we,a),n.validateEvent&&(V==null||V.validate("change").catch(l=>za()))}}),da=m(()=>[c.b(),c.m(k.value),c.is("disabled",f.value),p.class]),pa=m(()=>[b.e("icon"),"icon-arrow-down",c.is("reverse",D.value)]),fa=m(()=>c.is("focus",D.value||R.value)),Be=m(()=>{var a,l;return(l=(a=F.value)==null?void 0:a.popperRef)==null?void 0:l.contentRef}),U=a=>{var l,i,C;f.value||(a=a??!D.value,a!==D.value&&(D.value=a,(i=(l=H.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${a}`),a?(fe(),ne((C=$.value)==null?void 0:C.scrollToExpandingNode)):n.filterable&&_e(),s("visibleChange",a)))},fe=()=>{ne(()=>{var a;(a=F.value)==null||a.updatePopper()})},Le=()=>{A.value=!1},Pe=a=>{const{showAllLevels:l,separator:i}=n;return{node:a,key:a.uid,text:a.calcText(l,i),hitState:!1,closable:!f.value&&!a.isDisabled,isCollapseTag:!1}},Ve=a=>{var l;const i=a.node;i.doCheck(!1),(l=$.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ha=()=>{if(!_.value)return;const a=O.value,l=[],i=[];if(a.forEach(C=>i.push(Pe(C))),ae.value=i,a.length){a.slice(0,n.maxCollapseTags).forEach(J=>l.push(Pe(J)));const C=a.slice(n.maxCollapseTags),X=C.length;X&&(n.collapseTags?l.push({key:-1,text:`+ ${X}`,closable:!1,isCollapseTag:!0}):C.forEach(J=>l.push(Pe(J))))}x.value=l},ze=()=>{var a,l;const{filterMethod:i,showAllLevels:C,separator:X}=n,J=(l=(a=$.value)==null?void 0:a.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(Q=>Q.isDisabled?!1:(Q.calcText(C,X),i(Q,te.value)));_.value&&(x.value.forEach(Q=>{Q.hitState=!1}),ae.value.forEach(Q=>{Q.hitState=!1})),A.value=!0,le.value=J,fe()},va=()=>{var a;let l;A.value&&q.value?l=q.value.$el.querySelector(`.${c.e("suggestion-item")}`):l=(a=$.value)==null?void 0:a.$el.querySelector(`.${c.b("node")}[tabindex="-1"]`),l&&(l.focus(),!A.value&&l.click())},De=()=>{var a,l;const i=(a=H.value)==null?void 0:a.input,C=Y.value,X=(l=q.value)==null?void 0:l.$el;if(!(!sa||!i)){if(X){const J=X.querySelector(`.${c.e("suggestion-list")}`);J.style.minWidth=`${i.offsetWidth}px`}if(C){const{offsetHeight:J}=C,Q=x.value.length>0?`${Math.max(J+6,u)}px`:`${u}px`;i.style.height=Q,fe()}}},ma=a=>{var l;return(l=$.value)==null?void 0:l.getCheckedNodes(a)},ga=a=>{fe(),s("expandChange",a)},ie=a=>{var l;const i=(l=a.target)==null?void 0:l.value;if(a.type==="compositionend")oe.value=!1,ne(()=>Me(i));else{const C=i[i.length-1]||"";oe.value=!lt(C)}},ba=a=>{if(!oe.value)switch(a.code){case K.enter:U();break;case K.down:U(!0),ne(va),a.preventDefault();break;case K.esc:D.value===!0&&(a.preventDefault(),a.stopPropagation(),U(!1));break;case K.tab:U(!1);break}},ya=()=>{var a;(a=$.value)==null||a.clearCheckedNodes(),!D.value&&n.filterable&&_e(),U(!1)},_e=()=>{const{value:a}=Se;y.value=a,L.value=a},ka=a=>{var l,i;const{checked:C}=a;_.value?(l=$.value)==null||l.handleCheckChange(a,!C,!1):(!C&&((i=$.value)==null||i.handleCheckChange(a,!0,!1)),U(!1))},Ca=a=>{const l=a.target,{code:i}=a;switch(i){case K.up:case K.down:{const C=i===K.up?-1:1;ke(la(l,C,`.${c.e("suggestion-item")}[tabindex="-1"]`));break}case K.enter:l.click();break}},Na=()=>{const a=x.value,l=a[a.length-1];v=L.value?0:v+1,!(!l||!v||n.collapseTags&&a.length>1)&&(l.hitState?Ve(l):l.hitState=!0)},He=a=>{const l=a.target,i=c.e("search-input");l.className===i&&(R.value=!0),s("focus",a)},Ae=a=>{R.value=!1,s("blur",a)},Ea=ot(()=>{const{value:a}=te;if(!a)return;const l=n.beforeFilter(a);Ha(l)?l.then(ze).catch(()=>{}):l!==!1?ze():Le()},n.debounce),Me=(a,l)=>{!D.value&&U(!0),!(l!=null&&l.isComposing)&&(a?Ea():Le())},Oe=a=>Number.parseFloat(Ga(b.cssVarName("input-height"),a).value)-2;return ee(A,fe),ee([O,f],ha),ee(x,()=>{ne(()=>De())}),ee(k,async()=>{await ne();const a=H.value.input;u=Oe(a)||u,De()}),ee(Se,_e,{immediate:!0}),na(()=>{const a=H.value.input,l=Oe(a);u=a.offsetHeight||l,Aa(a,De)}),t({getCheckedNodes:ma,cascaderPanelRef:$,togglePopperVisible:U,contentRef:Be}),(a,l)=>(h(),z(d(Re),{ref_key:"tooltipRef",ref:F,visible:D.value,teleported:a.teleported,"popper-class":[d(c).e("dropdown"),a.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(c).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Le},{default:M(()=>[ye((h(),I("div",{class:T(d(da)),style:Oa(d(r)),onClick:l[5]||(l[5]=()=>U(d(B)?void 0:!0)),onKeydown:ba,onMouseenter:l[6]||(l[6]=i=>Z.value=!0),onMouseleave:l[7]||(l[7]=i=>Z.value=!1)},[G(d(st),{ref_key:"input",ref:H,modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=i=>y.value=i),placeholder:d(E),readonly:d(B),disabled:d(f),"validate-event":!1,size:d(k),class:T(d(fa)),tabindex:d(_)&&a.filterable&&!d(f)?-1:void 0,onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae,onInput:Me},{suffix:M(()=>[d(ua)?(h(),z(d(he),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(ya,["stop"])},{default:M(()=>[G(d(Ka))]),_:1},8,["class","onClick"])):(h(),z(d(he),{key:"arrow-down",class:T(d(pa)),onClick:l[0]||(l[0]=ve(i=>U(),["stop"]))},{default:M(()=>[G(d(qa))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d(_)?(h(),I("div",{key:0,ref_key:"tagWrapper",ref:Y,class:T([d(c).e("tags"),d(c).is("validate",!!d(ca))])},[(h(!0),I(ue,null,me(x.value,i=>(h(),z(d(Ze),{key:i.key,type:a.tagType,size:d(w),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:C=>Ve(i)},{default:M(()=>[i.isCollapseTag===!1?(h(),I("span",Dt,se(i.text),1)):(h(),z(d(Re),{key:1,disabled:D.value||!a.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:M(()=>[re("span",null,se(i.text),1)]),content:M(()=>[re("div",{class:T(d(c).e("collapse-tags"))},[(h(!0),I(ue,null,me(ae.value.slice(a.maxCollapseTags),(C,X)=>(h(),I("div",{key:X,class:T(d(c).e("collapse-tag"))},[(h(),z(d(Ze),{key:C.key,class:"in-tooltip",type:a.tagType,size:d(w),hit:C.hitState,closable:C.closable,"disable-transitions":"",onClose:J=>Ve(C)},{default:M(()=>[re("span",null,se(C.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),a.filterable&&!d(f)?ye((h(),I("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=i=>L.value=i),type:"text",class:T(d(c).e("search-input")),placeholder:d(Se)?"":d(g),onInput:l[3]||(l[3]=i=>Me(L.value,i)),onClick:l[4]||(l[4]=ve(i=>U(!0),["stop"])),onKeydown:Ra(Na,["delete"]),onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae},null,42,_t)),[[Ua,L.value]]):j("v-if",!0)],2)):j("v-if",!0)],38)),[[d(Wa),()=>U(!1),d(Be)]])]),content:M(()=>[ye(G(d(Lt),{ref_key:"cascaderPanelRef",ref:$,modelValue:d(Te),"onUpdate:modelValue":l[8]||(l[8]=i=>Za(Te)?Te.value=i:null),options:a.options,props:n.props,border:!1,"render-label":a.$slots.default,onExpandChange:ga,onClose:l[9]||(l[9]=i=>a.$nextTick(()=>U(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ue,!A.value]]),a.filterable?ye((h(),z(d(oa),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(c).e("suggestion-panel")),"view-class":d(c).e("suggestion-list"),onKeydown:Ca},{default:M(()=>[le.value.length?(h(!0),I(ue,{key:0},me(le.value,i=>(h(),I("li",{key:i.uid,class:T([d(c).e("suggestion-item"),d(c).is("checked",i.checked)]),tabindex:-1,onClick:C=>ka(i)},[re("span",null,se(i.text),1),i.checked?(h(),z(d(he),{key:0},{default:M(()=>[G(d(Xe))]),_:1})):j("v-if",!0)],10,Mt))),128)):ja(a.$slots,"empty",{key:1},()=>[re("li",{class:T(d(c).e("empty-text"))},se(d(N)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ue,A.value]]):j("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ne=$e(xt,[["__file","cascader.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const Bt=Ne,sn=Bt;export{sn as ElCascader,Vt as cascaderEmits,Pt as cascaderProps,Bt as default};
