import{n as pe,p as ce,ag as wt,_ as $e,a9 as he,ah as Xe,aa as Qe,ai as $t,i as et,c as m,aj as j,x as h,y as I,T as Z,O as B,ad as ve,N as M,H as G,A as T,I as ue,U as re,d as St,r as S,a3 as me,R as Tt,S as se,g as Lt,ak as Ie,C as Ke,al as Vt,h as tt,j as ge,a4 as Pt,am as Dt,q as _t,s as qe,w as ee,an as Mt,o as at,J as ne,ao as nt,ap as K,aq as ke,ar as st,a5 as It,m as Ft,a7 as xt,B as zt,as as Bt,G as Ht,at as ye,u as d,Q as At,au as Ot,av as Kt,af as Re,ac as qt,aw as Rt,ax as Ut,Y as jt,ay as Ue,z as Wt,az as Zt}from"./index-CQXB1C3t.js";import{E as lt}from"./index-CKW_sJRT.js";import{ElCheckbox as Gt}from"./index-Bb_-glpb.js";import{ElRadio as Yt}from"./index-DXJ4bxuT.js";import{u as ot}from"./index-C-6OfDDU.js";import{c as je,t as Jt,E as We}from"./index-1iOPsPCI.js";import{i as be}from"./isEqual-BfqlHFGY.js";import{U as Ee,C as we}from"./event-BB_Ol6Sd.js";import{u as Ze,c as Ge}from"./arrays-6TrVLtTe.js";import{s as Xt}from"./scroll-DkXEBV_a.js";import{b as Qt}from"./_baseFlatten-DXKqdjAq.js";import{b as ea,a as ta,c as aa,d as na}from"./index-4das4cVd.js";import{E as sa}from"./index-DQ_kKzU_.js";import{i as la}from"./index-BgPp_mYL.js";import{d as oa}from"./debounce-DxD4xqvT.js";import"./util-B2mB0_6C.js";import"./index--KdNXts2.js";import"./hasIn-DLUfdMxn.js";import"./flatten-DW-kOPV4.js";import"./_overRest-COy1ctVY.js";import"./identity-DKeuBCMA.js";var ia=1,ra=4;function it(e){return ea(e,ia|ra)}var ua=1/0;function ca(e){var a=e==null?0:e.length;return a?Qt(e,ua):[]}var da=pe({name:"NodeContent",setup(){return{ns:ce("cascader-node")}},render(){const{ns:e}=this,{node:a,panel:s}=this.$parent,{data:n,label:o}=a,{renderLabelFn:p}=s;return wt("span",{class:e.e("label")},p?p({node:a,data:n}):o)}});const xe=Symbol(),pa=pe({name:"ElCascaderNode",components:{ElCheckbox:Gt,ElRadio:Yt,NodeContent:da,ElIcon:he,Check:Xe,Loading:Qe,ArrowRight:$t},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:a}){const s=et(xe),n=ce("cascader-node"),o=m(()=>s.isHoverMenu),p=m(()=>s.config.multiple),u=m(()=>s.config.checkStrictly),v=m(()=>{var y;return(y=s.checkedNodes[0])==null?void 0:y.uid}),c=m(()=>e.node.isDisabled),b=m(()=>e.node.isLeaf),N=m(()=>u.value&&!b.value||!c.value),V=m(()=>F(s.expandingNode)),P=m(()=>u.value&&s.checkedNodes.some(F)),F=y=>{var L;const{level:x,uid:te}=e.node;return((L=y==null?void 0:y.pathNodes[x-1])==null?void 0:L.uid)===te},H=()=>{V.value||s.expandNode(e.node)},Y=y=>{const{node:L}=e;y!==L.checked&&s.handleCheckChange(L,y)},$=()=>{s.lazyLoad(e.node,()=>{b.value||H()})},q=y=>{o.value&&(D(),!b.value&&a("expand",y))},D=()=>{const{node:y}=e;!N.value||y.loading||(y.loaded?H():$())},W=()=>{o.value&&!b.value||(b.value&&!c.value&&!u.value&&!p.value?R(!0):D())},A=y=>{u.value?(Y(y),e.node.loaded&&H()):R(y)},R=y=>{e.node.loaded?(Y(y),!u.value&&H()):$()};return{panel:s,isHoverMenu:o,multiple:p,checkStrictly:u,checkedNodeId:v,isDisabled:c,isLeaf:b,expandable:N,inExpandingPath:V,inCheckedPath:P,ns:n,handleHoverExpand:q,handleExpand:D,handleClick:W,handleCheck:R,handleSelectCheck:A}}}),fa=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],ha=re("span",null,null,-1);function va(e,a,s,n,o,p){const u=j("el-checkbox"),v=j("el-radio"),c=j("check"),b=j("el-icon"),N=j("node-content"),V=j("loading"),P=j("arrow-right");return h(),I("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:T([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:a[2]||(a[2]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onFocus:a[3]||(a[3]=(...F)=>e.handleHoverExpand&&e.handleHoverExpand(...F)),onClick:a[4]||(a[4]=(...F)=>e.handleClick&&e.handleClick(...F))},[Z(" prefix "),e.multiple?(h(),B(u,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:a[0]||(a[0]=ve(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(h(),B(v,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:a[1]||(a[1]=ve(()=>{},["stop"]))},{default:M(()=>[Z(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),ha]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(h(),B(b,{key:2,class:T(e.ns.e("prefix"))},{default:M(()=>[G(c)]),_:1},8,["class"])):Z("v-if",!0),Z(" content "),G(N),Z(" postfix "),e.isLeaf?Z("v-if",!0):(h(),I(ue,{key:3},[e.node.loading?(h(),B(b,{key:0,class:T([e.ns.is("loading"),e.ns.e("postfix")])},{default:M(()=>[G(V)]),_:1},8,["class"])):(h(),B(b,{key:1,class:T(["arrow-right",e.ns.e("postfix")])},{default:M(()=>[G(P)]),_:1},8,["class"]))],64))],42,fa)}var ma=$e(pa,[["render",va],["__file","node.vue"]]);const ga=pe({name:"ElCascaderMenu",components:{Loading:Qe,ElIcon:he,ElScrollbar:lt,ElCascaderNode:ma},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const a=Lt(),s=ce("cascader-menu"),{t:n}=ot(),o=St();let p=null,u=null;const v=et(xe),c=S(null),b=m(()=>!e.nodes.length),N=m(()=>!v.initialLoaded),V=m(()=>`${o.value}-${e.index}`),P=$=>{p=$.target},F=$=>{if(!(!v.isHoverMenu||!p||!c.value))if(p.contains($.target)){H();const q=a.vnode.el,{left:D}=q.getBoundingClientRect(),{offsetWidth:W,offsetHeight:A}=q,R=$.clientX-D,y=p.offsetTop,L=y+p.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${y} L${W} 0 V${y} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${R} ${L} L${W} ${A} V${L} Z" />
        `}else u||(u=window.setTimeout(Y,v.config.hoverThreshold))},H=()=>{u&&(clearTimeout(u),u=null)},Y=()=>{c.value&&(c.value.innerHTML="",H())};return{ns:s,panel:v,hoverZone:c,isEmpty:b,isLoading:N,menuId:V,t:n,handleExpand:P,handleMouseMove:F,clearHoverZone:Y}}});function ba(e,a,s,n,o,p){const u=j("el-cascader-node"),v=j("loading"),c=j("el-icon"),b=j("el-scrollbar");return h(),B(b,{key:e.menuId,tag:"ul",role:"menu",class:T(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:M(()=>{var N;return[(h(!0),I(ue,null,me(e.nodes,V=>(h(),B(u,{key:V.uid,node:V,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(h(),I("div",{key:0,class:T(e.ns.e("empty-text"))},[G(c,{size:"14",class:T(e.ns.is("loading"))},{default:M(()=>[G(v)]),_:1},8,["class"]),Tt(" "+se(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(h(),I("div",{key:1,class:T(e.ns.e("empty-text"))},se(e.t("el.cascader.noData")),3)):(N=e.panel)!=null&&N.isHoverMenu?(h(),I("svg",{key:2,ref:"hoverZone",class:T(e.ns.e("hover-zone"))},null,2)):Z("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var ya=$e(ga,[["render",ba],["__file","menu.vue"]]);let ka=0;const Ca=e=>{const a=[e];let{parent:s}=e;for(;s;)a.unshift(s),s=s.parent;return a};class de{constructor(a,s,n,o=!1){this.data=a,this.config=s,this.parent=n,this.root=o,this.uid=ka++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:p,label:u,children:v}=s,c=a[v],b=Ca(this);this.level=o?0:n?n.level+1:1,this.value=a[p],this.label=a[u],this.pathNodes=b,this.pathValues=b.map(N=>N.value),this.pathLabels=b.map(N=>N.label),this.childrenData=c,this.children=(c||[]).map(N=>new de(N,s,this)),this.loaded=!s.lazy||this.isLeaf||!Ie(c)}get isDisabled(){const{data:a,parent:s,config:n}=this,{disabled:o,checkStrictly:p}=n;return(Ke(o)?o(a,this):!!a[o])||!p&&(s==null?void 0:s.isDisabled)}get isLeaf(){const{data:a,config:s,childrenData:n,loaded:o}=this,{lazy:p,leaf:u}=s,v=Ke(u)?u(a,this):a[u];return Vt(v)?p&&!o?!1:!(Array.isArray(n)&&n.length):!!v}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(a){const{childrenData:s,children:n}=this,o=new de(a,this.config,this);return Array.isArray(s)?s.push(a):this.childrenData=[a],n.push(o),o}calcText(a,s){const n=a?this.pathLabels.join(s):this.label;return this.text=n,n}broadcast(a,...s){const n=`onParent${je(a)}`;this.children.forEach(o=>{o&&(o.broadcast(a,...s),o[n]&&o[n](...s))})}emit(a,...s){const{parent:n}=this,o=`onChild${je(a)}`;n&&(n[o]&&n[o](...s),n.emit(a,...s))}onParentCheck(a){this.isDisabled||this.setCheckState(a)}onChildCheck(){const{children:a}=this,s=a.filter(o=>!o.isDisabled),n=s.length?s.every(o=>o.checked):!1;this.setCheckState(n)}setCheckState(a){const s=this.children.length,n=this.children.reduce((o,p)=>{const u=p.checked?1:p.indeterminate?.5:0;return o+u},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&a,this.indeterminate=this.loaded&&n!==s&&n>0}doCheck(a){if(this.checked===a)return;const{checkStrictly:s,multiple:n}=this.config;s||!n?this.checked=a:(this.broadcast("check",a),this.setCheckState(a),this.emit("check"))}}const Fe=(e,a)=>e.reduce((s,n)=>(n.isLeaf?s.push(n):(!a&&s.push(n),s=s.concat(Fe(n.children,a))),s),[]);class Ye{constructor(a,s){this.config=s;const n=(a||[]).map(o=>new de(o,this.config));this.nodes=n,this.allNodes=Fe(n,!1),this.leafNodes=Fe(n,!0)}getNodes(){return this.nodes}getFlattedNodes(a){return a?this.leafNodes:this.allNodes}appendNode(a,s){const n=s?s.appendChild(a):new de(a,this.config);s||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(a,s){a.forEach(n=>this.appendNode(n,s))}getNodeByValue(a,s=!1){return!a&&a!==0?null:this.getFlattedNodes(s).find(o=>be(o.value,a)||be(o.pathValues,a))||null}getSameNode(a){return a&&this.getFlattedNodes(!1).find(({value:n,level:o})=>be(a.value,n)&&a.level===o)||null}}const rt=tt({modelValue:{type:ge([Number,String,Array])},options:{type:ge(Array),default:()=>[]},props:{type:ge(Object),default:()=>({})}}),Na={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Pt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Ea=e=>m(()=>({...Na,...e.props})),Je=e=>{if(!e)return 0;const a=e.id.split("-");return Number(a[a.length-2])},wa=e=>{if(!e)return;const a=e.querySelector("input");a?a.click():Dt(e)&&e.click()},$a=(e,a)=>{const s=a.slice(0),n=s.map(p=>p.uid),o=e.reduce((p,u)=>{const v=n.indexOf(u.uid);return v>-1&&(p.push(u),s.splice(v,1),n.splice(v,1)),p},[]);return o.push(...s),o},Sa=pe({name:"ElCascaderPanel",components:{ElCascaderMenu:ya},props:{...rt,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Ee,we,"close","expand-change"],setup(e,{emit:a,slots:s}){let n=!1;const o=ce("cascader"),p=Ea(e);let u=null;const v=S(!0),c=S([]),b=S(null),N=S([]),V=S(null),P=S([]),F=m(()=>p.value.expandTrigger==="hover"),H=m(()=>e.renderLabel||s.default),Y=()=>{const{options:r}=e,f=p.value;n=!1,u=new Ye(r,f),N.value=[u.getNodes()],f.lazy&&Ie(e.options)?(v.value=!1,$(void 0,g=>{g&&(u=new Ye(g,f),N.value=[u.getNodes()]),v.value=!0,x(!1,!0)})):x(!1,!0)},$=(r,f)=>{const g=p.value;r=r||new de({},g,void 0,!0),r.loading=!0;const E=k=>{const w=r,_=w.root?null:w;k&&(u==null||u.appendNodes(k,_)),w.loading=!1,w.loaded=!0,w.childrenData=w.childrenData||[],f&&f(k)};g.lazyLoad(r,E)},q=(r,f)=>{var g;const{level:E}=r,k=N.value.slice(0,E);let w;r.isLeaf?w=r.pathNodes[E-2]:(w=r,k.push(r.children)),((g=V.value)==null?void 0:g.uid)!==(w==null?void 0:w.uid)&&(V.value=r,N.value=k,!f&&a("expand-change",(r==null?void 0:r.pathValues)||[]))},D=(r,f,g=!0)=>{const{checkStrictly:E,multiple:k}=p.value,w=P.value[0];n=!0,!k&&(w==null||w.doCheck(!1)),r.doCheck(f),L(),g&&!k&&!E&&a("close"),!g&&!k&&!E&&W(r)},W=r=>{r&&(r=r.parent,W(r),r&&q(r))},A=r=>u==null?void 0:u.getFlattedNodes(r),R=r=>{var f;return(f=A(r))==null?void 0:f.filter(g=>g.checked!==!1)},y=()=>{P.value.forEach(r=>r.doCheck(!1)),L(),N.value=N.value.slice(0,1),V.value=null,a("expand-change",[])},L=()=>{var r;const{checkStrictly:f,multiple:g}=p.value,E=P.value,k=R(!f),w=$a(E,k),_=w.map(z=>z.valueByOption);P.value=w,b.value=g?_:(r=_[0])!=null?r:null},x=(r=!1,f=!1)=>{const{modelValue:g}=e,{lazy:E,multiple:k,checkStrictly:w}=p.value,_=!w;if(!(!v.value||n||!f&&be(g,b.value)))if(E&&!r){const ae=Ze(ca(Ge(g))).map(O=>u==null?void 0:u.getNodeByValue(O)).filter(O=>!!O&&!O.loaded&&!O.loading);ae.length?ae.forEach(O=>{$(O,()=>x(!1,f))}):x(!0,f)}else{const z=k?Ge(g):[g],ae=Ze(z.map(O=>u==null?void 0:u.getNodeByValue(O,_)));te(ae,f),b.value=it(g)}},te=(r,f=!0)=>{const{checkStrictly:g}=p.value,E=P.value,k=r.filter(z=>!!z&&(g||z.isLeaf)),w=u==null?void 0:u.getSameNode(V.value),_=f&&w||k[0];_?_.pathNodes.forEach(z=>q(z,!0)):V.value=null,E.forEach(z=>z.doCheck(!1)),qe(k).forEach(z=>z.doCheck(!0)),P.value=k,ne(le)},le=()=>{nt&&c.value.forEach(r=>{const f=r==null?void 0:r.$el;if(f){const g=f.querySelector(`.${o.namespace.value}-scrollbar__wrap`),E=f.querySelector(`.${o.b("node")}.${o.is("active")}`)||f.querySelector(`.${o.b("node")}.in-active-path`);Xt(g,E)}})},oe=r=>{const f=r.target,{code:g}=r;switch(g){case K.up:case K.down:{r.preventDefault();const E=g===K.up?-1:1;ke(st(f,E,`.${o.b("node")}[tabindex="-1"]`));break}case K.left:{r.preventDefault();const E=c.value[Je(f)-1],k=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);ke(k);break}case K.right:{r.preventDefault();const E=c.value[Je(f)+1],k=E==null?void 0:E.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);ke(k);break}case K.enter:wa(f);break}};return _t(xe,qe({config:p,expandingNode:V,checkedNodes:P,isHoverMenu:F,initialLoaded:v,renderLabelFn:H,lazyLoad:$,expandNode:q,handleCheckChange:D})),ee([p,()=>e.options],Y,{deep:!0,immediate:!0}),ee(()=>e.modelValue,()=>{n=!1,x()},{deep:!0}),ee(()=>b.value,r=>{be(r,e.modelValue)||(a(Ee,r),a(we,r))}),Mt(()=>c.value=[]),at(()=>!Ie(e.modelValue)&&x()),{ns:o,menuList:c,menus:N,checkedNodes:P,handleKeyDown:oe,handleCheckChange:D,getFlattedNodes:A,getCheckedNodes:R,clearCheckedNodes:y,calculateCheckedValue:L,scrollToExpandingNode:le}}});function Ta(e,a,s,n,o,p){const u=j("el-cascader-menu");return h(),I("div",{class:T([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:a[0]||(a[0]=(...v)=>e.handleKeyDown&&e.handleKeyDown(...v))},[(h(!0),I(ue,null,me(e.menus,(v,c)=>(h(),B(u,{key:c,ref_for:!0,ref:b=>e.menuList[c]=b,index:c,nodes:[...v]},null,8,["index","nodes"]))),128))],34)}var Ce=$e(Sa,[["render",Ta],["__file","index.vue"]]);Ce.install=e=>{e.component(Ce.name,Ce)};const La=Ce,Va=tt({...rt,size:ta,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:ge(Function),default:(e,a)=>e.text.includes(a)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:ge(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:It.teleported,tagType:{...Jt.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),Pa={[Ee]:e=>!!e||e===null,[we]:e=>!!e||e===null,focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,visibleChange:e=>Ft(e),expandChange:e=>!!e,removeTag:e=>!!e},Da={key:0},_a=["placeholder","onKeydown"],Ma=["onClick"],Ia="ElCascader",Fa=pe({name:Ia}),xa=pe({...Fa,props:Va,emits:Pa,setup(e,{expose:a,emit:s}){const n=e,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:t})=>{const{modifiersData:l,placement:i}=t;["right","left","bottom","top"].includes(i)||(l.arrow.x=35)},requires:["arrow"]}]},p=xt();let u=0,v=0;const c=ce("cascader"),b=ce("input"),{t:N}=ot(),{form:V,formItem:P}=aa(),F=S(null),H=S(null),Y=S(null),$=S(null),q=S(null),D=S(!1),W=S(!1),A=S(!1),R=S(!1),y=S(""),L=S(""),x=S([]),te=S([]),le=S([]),oe=S(!1),r=m(()=>p.style),f=m(()=>n.disabled||(V==null?void 0:V.disabled)),g=m(()=>n.placeholder||N("el.cascader.placeholder")),E=m(()=>L.value||x.value.length>0||oe.value?"":g.value),k=na(),w=m(()=>["small"].includes(k.value)?"small":"default"),_=m(()=>!!n.props.multiple),z=m(()=>!n.filterable||_.value),ae=m(()=>_.value?L.value:y.value),O=m(()=>{var t;return((t=$.value)==null?void 0:t.checkedNodes)||[]}),ut=m(()=>!n.clearable||f.value||A.value||!W.value?!1:!!O.value.length),Se=m(()=>{const{showAllLevels:t,separator:l}=n,i=O.value;return i.length?_.value?"":i[0].calcText(t,l):""}),ct=m(()=>(P==null?void 0:P.validateState)||""),Te=m({get(){return it(n.modelValue)},set(t){s(Ee,t),s(we,t),n.validateEvent&&(P==null||P.validate("change").catch(l=>zt()))}}),dt=m(()=>[c.b(),c.m(k.value),c.is("disabled",f.value),p.class]),pt=m(()=>[b.e("icon"),"icon-arrow-down",c.is("reverse",D.value)]),ft=m(()=>c.is("focus",D.value||R.value)),ze=m(()=>{var t,l;return(l=(t=F.value)==null?void 0:t.popperRef)==null?void 0:l.contentRef}),U=t=>{var l,i,C;f.value||(t=t??!D.value,t!==D.value&&(D.value=t,(i=(l=H.value)==null?void 0:l.input)==null||i.setAttribute("aria-expanded",`${t}`),t?(fe(),ne((C=$.value)==null?void 0:C.scrollToExpandingNode)):n.filterable&&_e(),s("visibleChange",t)))},fe=()=>{ne(()=>{var t;(t=F.value)==null||t.updatePopper()})},Le=()=>{A.value=!1},Ve=t=>{const{showAllLevels:l,separator:i}=n;return{node:t,key:t.uid,text:t.calcText(l,i),hitState:!1,closable:!f.value&&!t.isDisabled,isCollapseTag:!1}},Pe=t=>{var l;const i=t.node;i.doCheck(!1),(l=$.value)==null||l.calculateCheckedValue(),s("removeTag",i.valueByOption)},ht=()=>{if(!_.value)return;const t=O.value,l=[],i=[];if(t.forEach(C=>i.push(Ve(C))),te.value=i,t.length){t.slice(0,n.maxCollapseTags).forEach(J=>l.push(Ve(J)));const C=t.slice(n.maxCollapseTags),X=C.length;X&&(n.collapseTags?l.push({key:-1,text:`+ ${X}`,closable:!1,isCollapseTag:!0}):C.forEach(J=>l.push(Ve(J))))}x.value=l},Be=()=>{var t,l;const{filterMethod:i,showAllLevels:C,separator:X}=n,J=(l=(t=$.value)==null?void 0:t.getFlattedNodes(!n.props.checkStrictly))==null?void 0:l.filter(Q=>Q.isDisabled?!1:(Q.calcText(C,X),i(Q,ae.value)));_.value&&(x.value.forEach(Q=>{Q.hitState=!1}),te.value.forEach(Q=>{Q.hitState=!1})),A.value=!0,le.value=J,fe()},vt=()=>{var t;let l;A.value&&q.value?l=q.value.$el.querySelector(`.${c.e("suggestion-item")}`):l=(t=$.value)==null?void 0:t.$el.querySelector(`.${c.b("node")}[tabindex="-1"]`),l&&(l.focus(),!A.value&&l.click())},De=()=>{var t,l;const i=(t=H.value)==null?void 0:t.input,C=Y.value,X=(l=q.value)==null?void 0:l.$el;if(!(!nt||!i)){if(X){const J=X.querySelector(`.${c.e("suggestion-list")}`);J.style.minWidth=`${i.offsetWidth}px`}if(C){const{offsetHeight:J}=C,Q=x.value.length>0?`${Math.max(J+6,u)}px`:`${u}px`;i.style.height=Q,fe()}}},mt=t=>{var l;return(l=$.value)==null?void 0:l.getCheckedNodes(t)},gt=t=>{fe(),s("expandChange",t)},ie=t=>{var l;const i=(l=t.target)==null?void 0:l.value;if(t.type==="compositionend")oe.value=!1,ne(()=>Me(i));else{const C=i[i.length-1]||"";oe.value=!la(C)}},bt=t=>{if(!oe.value)switch(t.code){case K.enter:U();break;case K.down:U(!0),ne(vt),t.preventDefault();break;case K.esc:D.value===!0&&(t.preventDefault(),t.stopPropagation(),U(!1));break;case K.tab:U(!1);break}},yt=()=>{var t;(t=$.value)==null||t.clearCheckedNodes(),!D.value&&n.filterable&&_e(),U(!1)},_e=()=>{const{value:t}=Se;y.value=t,L.value=t},kt=t=>{var l,i;const{checked:C}=t;_.value?(l=$.value)==null||l.handleCheckChange(t,!C,!1):(!C&&((i=$.value)==null||i.handleCheckChange(t,!0,!1)),U(!1))},Ct=t=>{const l=t.target,{code:i}=t;switch(i){case K.up:case K.down:{const C=i===K.up?-1:1;ke(st(l,C,`.${c.e("suggestion-item")}[tabindex="-1"]`));break}case K.enter:l.click();break}},Nt=()=>{const t=x.value,l=t[t.length-1];v=L.value?0:v+1,!(!l||!v||n.collapseTags&&t.length>1)&&(l.hitState?Pe(l):l.hitState=!0)},He=t=>{const l=t.target,i=c.e("search-input");l.className===i&&(R.value=!0),s("focus",t)},Ae=t=>{R.value=!1,s("blur",t)},Et=oa(()=>{const{value:t}=ae;if(!t)return;const l=n.beforeFilter(t);Bt(l)?l.then(Be).catch(()=>{}):l!==!1?Be():Le()},n.debounce),Me=(t,l)=>{!D.value&&U(!0),!(l!=null&&l.isComposing)&&(t?Et():Le())},Oe=t=>Number.parseFloat(Zt(b.cssVarName("input-height"),t).value)-2;return ee(A,fe),ee([O,f],ht),ee(x,()=>{ne(()=>De())}),ee(k,async()=>{await ne();const t=H.value.input;u=Oe(t)||u,De()}),ee(Se,_e,{immediate:!0}),at(()=>{const t=H.value.input,l=Oe(t);u=t.offsetHeight||l,Ht(t,De)}),a({getCheckedNodes:mt,cascaderPanelRef:$,togglePopperVisible:U,contentRef:ze}),(t,l)=>(h(),B(d(Re),{ref_key:"tooltipRef",ref:F,visible:D.value,teleported:t.teleported,"popper-class":[d(c).e("dropdown"),t.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${d(c).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Le},{default:M(()=>[ye((h(),I("div",{class:T(d(dt)),style:At(d(r)),onClick:l[5]||(l[5]=()=>U(d(z)?void 0:!0)),onKeydown:bt,onMouseenter:l[6]||(l[6]=i=>W.value=!0),onMouseleave:l[7]||(l[7]=i=>W.value=!1)},[G(d(sa),{ref_key:"input",ref:H,modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=i=>y.value=i),placeholder:d(E),readonly:d(z),disabled:d(f),"validate-event":!1,size:d(k),class:T(d(ft)),tabindex:d(_)&&t.filterable&&!d(f)?-1:void 0,onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae,onInput:Me},{suffix:M(()=>[d(ut)?(h(),B(d(he),{key:"clear",class:T([d(b).e("icon"),"icon-circle-close"]),onClick:ve(yt,["stop"])},{default:M(()=>[G(d(Ot))]),_:1},8,["class","onClick"])):(h(),B(d(he),{key:"arrow-down",class:T(d(pt)),onClick:l[0]||(l[0]=ve(i=>U(),["stop"]))},{default:M(()=>[G(d(Kt))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),d(_)?(h(),I("div",{key:0,ref_key:"tagWrapper",ref:Y,class:T([d(c).e("tags"),d(c).is("validate",!!d(ct))])},[(h(!0),I(ue,null,me(x.value,i=>(h(),B(d(We),{key:i.key,type:t.tagType,size:d(w),hit:i.hitState,closable:i.closable,"disable-transitions":"",onClose:C=>Pe(i)},{default:M(()=>[i.isCollapseTag===!1?(h(),I("span",Da,se(i.text),1)):(h(),B(d(Re),{key:1,disabled:D.value||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:M(()=>[re("span",null,se(i.text),1)]),content:M(()=>[re("div",{class:T(d(c).e("collapse-tags"))},[(h(!0),I(ue,null,me(te.value.slice(t.maxCollapseTags),(C,X)=>(h(),I("div",{key:X,class:T(d(c).e("collapse-tag"))},[(h(),B(d(We),{key:C.key,class:"in-tooltip",type:t.tagType,size:d(w),hit:C.hitState,closable:C.closable,"disable-transitions":"",onClose:J=>Pe(C)},{default:M(()=>[re("span",null,se(C.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),t.filterable&&!d(f)?ye((h(),I("input",{key:0,"onUpdate:modelValue":l[2]||(l[2]=i=>L.value=i),type:"text",class:T(d(c).e("search-input")),placeholder:d(Se)?"":d(g),onInput:l[3]||(l[3]=i=>Me(L.value,i)),onClick:l[4]||(l[4]=ve(i=>U(!0),["stop"])),onKeydown:qt(Nt,["delete"]),onCompositionstart:ie,onCompositionupdate:ie,onCompositionend:ie,onFocus:He,onBlur:Ae},null,42,_a)),[[Rt,L.value]]):Z("v-if",!0)],2)):Z("v-if",!0)],38)),[[d(Ut),()=>U(!1),d(ze)]])]),content:M(()=>[ye(G(d(La),{ref_key:"cascaderPanelRef",ref:$,modelValue:d(Te),"onUpdate:modelValue":l[8]||(l[8]=i=>jt(Te)?Te.value=i:null),options:t.options,props:n.props,border:!1,"render-label":t.$slots.default,onExpandChange:gt,onClose:l[9]||(l[9]=i=>t.$nextTick(()=>U(!1)))},null,8,["modelValue","options","props","render-label"]),[[Ue,!A.value]]),t.filterable?ye((h(),B(d(lt),{key:0,ref_key:"suggestionPanel",ref:q,tag:"ul",class:T(d(c).e("suggestion-panel")),"view-class":d(c).e("suggestion-list"),onKeydown:Ct},{default:M(()=>[le.value.length?(h(!0),I(ue,{key:0},me(le.value,i=>(h(),I("li",{key:i.uid,class:T([d(c).e("suggestion-item"),d(c).is("checked",i.checked)]),tabindex:-1,onClick:C=>kt(i)},[re("span",null,se(i.text),1),i.checked?(h(),B(d(he),{key:0},{default:M(()=>[G(d(Xe))]),_:1})):Z("v-if",!0)],10,Ma))),128)):Wt(t.$slots,"empty",{key:1},()=>[re("li",{class:T(d(c).e("empty-text"))},se(d(N)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Ue,A.value]]):Z("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Ne=$e(xa,[["__file","cascader.vue"]]);Ne.install=e=>{e.component(Ne.name,Ne)};const za=Ne,ln=za;export{ln as ElCascader,Pa as cascaderEmits,Va as cascaderProps,za as default};
