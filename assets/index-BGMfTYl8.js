import{d as R,a as Se}from"./customParseFormat-CHUSihUt.js";import{c as Te,u as _e,d as W,f as De,g as Ae,t as Pe,T as Ce,h as Re,C as we}from"./panel-time-pick-CBI1Bcx9.js";import{b as In,D as Mn,i as Fn,j as yn,a as Ln,e as Un,k as Nn,m as Hn,p as Bn,r as jn,l as Kn,v as qn}from"./panel-time-pick-CBI1Bcx9.js";import{h as xe,j as Ee,_ as Oe,n as J,p as Z,i as Ve,c as T,r as Q,x as Ie,y as Me,U as k,A as b,u as r,S as E,H as V,T as Fe,k as N,ap as ye,q as Le,ab as Ue}from"./index-CQXB1C3t.js";import{u as Ne}from"./index-C-6OfDDU.js";import{b as He}from"./_baseFlatten-DXKqdjAq.js";import{i as Be}from"./identity-DKeuBCMA.js";import{s as je,o as Ke}from"./_overRest-COy1ctVY.js";import{s as X,S as qe,c as $e}from"./isEqual-BfqlHFGY.js";import{b as Ge}from"./_baseFindIndex-D7XfJLKM.js";import{i as Ye,h as ze,S as H}from"./index-4das4cVd.js";import"./index-DQ_kKzU_.js";import"./index-BgPp_mYL.js";import"./event-BB_Ol6Sd.js";import"./index-CKW_sJRT.js";import"./util-B2mB0_6C.js";import"./index-B8l9tfGL.js";import"./debounce-DxD4xqvT.js";function We(){}function Ze(t){return t!==t}function Je(t,s,o){for(var i=o-1,p=t.length;++i<p;)if(t[i]===s)return i;return-1}function Qe(t,s,o){return s===s?Je(t,s,o):Ge(t,Ze,o)}function Xe(t,s){var o=t==null?0:t.length;return!!o&&Qe(t,s,0)>-1}function en(t,s){return je(Ke(t,s,Be),t+"")}function nn(t){return Ye(t)&&ze(t)}function tn(t,s,o){for(var i=-1,p=t==null?0:t.length;++i<p;)if(o(s,t[i]))return!0;return!1}var an=1/0,sn=H&&1/X(new H([,-0]))[1]==an?function(t){return new H(t)}:We,on=200;function rn(t,s,o){var i=-1,p=Xe,v=t.length,a=!0,c=[],f=c;if(o)a=!1,p=tn;else if(v>=on){var _=s?null:sn(t);if(_)return X(_);a=!1,p=$e,f=new qe}else f=s?[]:c;e:for(;++i<v;){var g=t[i],S=s?s(g):g;if(g=o||g!==0?g:0,a&&S===S){for(var w=f.length;w--;)if(f[w]===S)continue e;s&&f.push(S),c.push(g)}else p(f,S,o)||(f!==c&&f.push(S),c.push(g))}return c}var B=en(function(t){return rn(He(t,1,nn,!0))});const ln=xe({...Te,parsedValue:{type:Ee(Array)}}),cn=["disabled"],un=J({__name:"panel-time-range",props:ln,emits:["pick","select-range","set-picker-option"],setup(t,{emit:s}){const o=t,i=(e,n)=>{const l=[];for(let u=e;u<=n;u++)l.push(u);return l},{t:p,lang:v}=Ne(),a=Z("time"),c=Z("picker"),f=Ve("EP_PICKER_BASE"),{arrowControl:_,disabledHours:g,disabledMinutes:S,disabledSeconds:w,defaultValue:I}=f.props,ee=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),P.value?"has-seconds":""]),ne=T(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",_),P.value?"has-seconds":""]),D=T(()=>o.parsedValue[0]),A=T(()=>o.parsedValue[1]),te=_e(o),ae=()=>{s("pick",te.value,!1)},P=T(()=>o.format.includes("ss")),j=T(()=>o.format.includes("A")?"A":o.format.includes("a")?"a":""),se=(e=!1)=>{s("pick",[D.value,A.value],e)},oe=e=>{K(e.millisecond(0),A.value)},re=e=>{K(D.value,e.millisecond(0))},le=e=>{const n=e.map(u=>R(u).locale(v.value)),l=$(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},K=(e,n)=>{s("pick",[e,n],!0)},ie=T(()=>D.value>A.value),x=Q([0,2]),ce=(e,n)=>{s("select-range",e,n,"min"),x.value=[e,n]},q=T(()=>P.value?11:8),ue=(e,n)=>{s("select-range",e,n,"max");const l=r(q);x.value=[e+l,n+l]},pe=e=>{const n=P.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(P.value?["seconds"]:[]),d=(n.indexOf(x.value[0])+e+n.length)%n.length,m=n.length/2;d<m?L.start_emitSelectRange(l[d]):L.end_emitSelectRange(l[d-m])},de=e=>{const n=e.code,{left:l,right:u,up:d,down:m}=ye;if([l,u].includes(n)){pe(n===l?-1:1),e.preventDefault();return}if([d,m].includes(n)){const h=n===d?-1:1,C=x.value[0]<q.value?"start":"end";L[`${C}_scrollDown`](h),e.preventDefault();return}},M=(e,n)=>{const l=g?g(e):[],u=e==="start",m=(n||(u?A.value:D.value)).hour(),h=u?i(m+1,23):i(0,m-1);return B(l,h)},F=(e,n,l)=>{const u=S?S(e,n):[],d=n==="start",m=l||(d?A.value:D.value),h=m.hour();if(e!==h)return u;const C=m.minute(),U=d?i(C+1,59):i(0,C-1);return B(u,U)},y=(e,n,l,u)=>{const d=w?w(e,n,l):[],m=l==="start",h=u||(m?A.value:D.value),C=h.hour(),U=h.minute();if(e!==C||n!==U)return d;const z=h.second(),ke=m?i(z+1,59):i(0,z-1);return B(d,ke)},$=([e,n])=>[G(e,"start",!0,n),G(n,"end",!1,e)],{getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}=Ae(M,F,y),{timePickerOptions:L,getAvailableTime:G,onSetOption:Y}=De({getAvailableHours:me,getAvailableMinutes:fe,getAvailableSeconds:be}),ve=e=>e?N(e)?e.map(n=>R(n,o.format).locale(v.value)):R(e,o.format).locale(v.value):null,ge=e=>e?N(e)?e.map(n=>n.format(o.format)):e.format(o.format):null,he=()=>{if(N(I))return I.map(n=>R(n).locale(v.value));const e=R(I).locale(v.value);return[e,e.add(60,"m")]};return s("set-picker-option",["formatToString",ge]),s("set-picker-option",["parseUserInput",ve]),s("set-picker-option",["isValidValue",le]),s("set-picker-option",["handleKeydownInput",de]),s("set-picker-option",["getDefaultValue",he]),s("set-picker-option",["getRangeAvailableTime",$]),(e,n)=>e.actualVisible?(Ie(),Me("div",{key:0,class:b([r(a).b("range-picker"),r(c).b("panel")])},[k("div",{class:b(r(a).be("range-picker","content"))},[k("div",{class:b(r(a).be("range-picker","cell"))},[k("div",{class:b(r(a).be("range-picker","header"))},E(r(p)("el.datepicker.startTime")),3),k("div",{class:b(r(ee))},[V(W,{ref:"minSpinner",role:"start","show-seconds":r(P),"am-pm-mode":r(j),"arrow-control":r(_),"spinner-date":r(D),"disabled-hours":M,"disabled-minutes":F,"disabled-seconds":y,onChange:oe,onSetOption:r(Y),onSelectRange:ce},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:b(r(a).be("range-picker","cell"))},[k("div",{class:b(r(a).be("range-picker","header"))},E(r(p)("el.datepicker.endTime")),3),k("div",{class:b(r(ne))},[V(W,{ref:"maxSpinner",role:"end","show-seconds":r(P),"am-pm-mode":r(j),"arrow-control":r(_),"spinner-date":r(A),"disabled-hours":M,"disabled-minutes":F,"disabled-seconds":y,onChange:re,onSetOption:r(Y),onSelectRange:ue},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:b(r(a).be("panel","footer"))},[k("button",{type:"button",class:b([r(a).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=l=>ae())},E(r(p)("el.datepicker.cancel")),3),k("button",{type:"button",class:b([r(a).be("panel","btn"),"confirm"]),disabled:r(ie),onClick:n[1]||(n[1]=l=>se())},E(r(p)("el.datepicker.confirm")),11,cn)],2)],2)):Fe("v-if",!0)}});var pn=Oe(un,[["__file","panel-time-range.vue"]]);R.extend(Se);var dn=J({name:"ElTimePicker",install:null,props:{...Pe,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,s){const o=Q(),[i,p]=t.isRange?["timerange",pn]:["time",Ce],v=a=>s.emit("update:modelValue",a);return Le("ElPopperOptions",t.popperOptions),s.expose({focus:a=>{var c;(c=o.value)==null||c.handleFocusInput(a)},blur:a=>{var c;(c=o.value)==null||c.handleBlurInput(a)},handleOpen:()=>{var a;(a=o.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=o.value)==null||a.handleClose()}}),()=>{var a;const c=(a=t.format)!=null?a:Re;return V(we,Ue(t,{ref:o,type:i,format:c,"onUpdate:modelValue":v}),{default:f=>V(p,f,null)})}}});const O=dn;O.install=t=>{t.component(O.name,O)};const En=O;export{we as CommonPicker,In as DEFAULT_FORMATS_DATE,Mn as DEFAULT_FORMATS_DATEPICKER,Re as DEFAULT_FORMATS_TIME,En as ElTimePicker,Ce as TimePickPanel,Fn as buildTimeList,yn as dateEquals,O as default,Ln as extractDateFormat,Un as extractTimeFormat,Nn as formatter,Hn as makeList,Bn as parseDate,jn as rangeArr,Pe as timePickerDefaultProps,Kn as timeUnits,qn as valueEquals};
